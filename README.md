# SHOPPING CART

COOKIE, TO STORE INFO OF USERS SHOPPING CART (**WE CAN'T USE DATABASE, BECAUSE WE WILL ALLOW ANY USER TO ADD ITEMS TO CART AN TO INTERACT WITH OTHER LOGIC OF SHOPPING CART, `BUT IF USERS WANTS TO BUY THINGS HE WILL BE DIRECTED TO SIGN IN`**)

**WE ARE GOING TO MANGE STATE OF OUR SHOPPING CART BY USING [xstate](https://www.npmjs.com/package/xstate) AND [@xstate/react](https://www.npmjs.com/package/@xstate/react) LIBRARIES**

AND WE WILL USE [js-cookie](https://www.npmjs.com/package/js-cookie)

## SHOPPING CART DRAWER UI WILL BE DRAWER RENDERED ON EVERY PAGE

IT IS GOING TO BE COMPONENT THAT IS PART OF THE HEADER COMPONENT

## WE WON'T BE HAVING CART PAGE SINCE IT IS GOING TO BE DRAWER

## WHEN ITEM IS ADDED TO THE CART QUANTITY IN DATBASE SHOULD BE LOWERED (IT WOULD BE LIKE RESERVATION)

**THIS IS MAYBE TOO MUCH, AND IT IS TEDIOUS BUT I'M GOING TO DO IT BECAUSE I WANT TO INTERACT WITH A DATABASE**

OFCOURSE I DIDN'T TACKLE ANY CONCURRENCY PROBLEMS (I SHOULDN'T (BECAUSE FOR THAT PURPOSE I SHOULD SEPARATE EVERYTHING IN MICROSERVICE AND USE MESSSAGE BROKER (OUT OF SCOPE OF THIS PROJECT)))

# CHECKING CART EXPIRATION EVERY 10 MINUTES SINCE SHOPPING CART WAS MOUNTED

WE COMPARE AGAINST DATE WE WILL STORE IN A COOKIE AS WELL

# THIS FRONTEND TIMER IS OBVIOUSLLY BAD

LETS SAY USER DIES AND NEVER OPENS HIS BROWSER, OR IT GETS TIERD OF YOUR SITE AND NEVER VISITS AGAIN

**SO, IT WOULD BE BETTER IF YOU DEFINED EXPIRATION LOGIC ON SERVER SIDE BY USING BULL.js AND REDIS** (THIS IS OUT OF THE SCOPE OF THIS TUTORIAL SO WE WON'T BE DOING THAT)

FOR NOW WE WILL DEFINE EXPIRATION AT FRONTEND

# CLEAR CART LOGIC NEEDS TO RETURN ITEMS BACK

AT THE ENT MAJORITY OF ROUTES DID RETURN PRODUCT OR PRODUCTS BACK

# COMPONENTS WE BUILT AROUND CART LOGIC

`components/2_product_page/AddToCart.tsx` (HOOKED TO PRODUCT PAGE)

`components/Cart.tsx` (HOOKED TO HEADER)

# MACHINE I BUILT AND HOOKED UP

`machines/cart-machine.ts`

# I DECIDED TO COMMENT OUT TIMER FOR NOW

I'LL GET TO IT AT THE END OF THE PROJECT